# Azure Deployment Plan for FitTrack-Full_stack_fitness_app Project

## **Goal**
Deploy the FitTrack-Full_stack_fitness_app project to Azure using Azure Developer CLI (AZD).

## **Project Information**
**App Name**: FitTrack-Full_stack_fitness_app
- **Stack**: Java Spring Boot Microservices, React Frontend
- **Type**: Fitness tracking application
- **Containerization**: Not containerized
- **Dependencies**: MySQL database
- **Hosting**: Azure App Service

## **Azure Resources Architecture**
> **Install the mermaid extension in IDE to view the architecture.**
```mermaid
graph TD
%% Services
svcazureappservice_activityservice["`Name: activityservice\nPath: activityservice\nLanguage: java`"]
svcazureappservice_adminservice["`Name: adminservice\nPath: adminservice\nLanguage: java`"]
svcazureappservice_aiservice["`Name: aiservice\nPath: aiservice\nLanguage: java`"]
svcazureappservice_configserver["`Name: configserver\nPath: configserver\nLanguage: java`"]
svcazureappservice_eureka["`Name: eureka\nPath: eureka\nLanguage: java`"]
svcazureappservice_gateway["`Name: gateway\nPath: gateway\nLanguage: java`"]
svcazureappservice_userservice["`Name: userservice\nPath: userservice\nLanguage: java`"]
svcazureappservice_fitnessappfrontend["`Name: fitness-app-frontend\nPath: fitness-app-frontend\nLanguage: ts`"]
subgraph "Compute Resources"
%% Resources
azureappservice_activityservice("`activityservice (Azure App Service)`")
azureappservice_adminservice("`adminservice (Azure App Service)`")
azureappservice_aiservice("`aiservice (Azure App Service)`")
azureappservice_configserver("`configserver (Azure App Service)`")
azureappservice_eureka("`eureka (Azure App Service)`")
azureappservice_gateway("`gateway (Azure App Service)`")
azureappservice_userservice("`userservice (Azure App Service)`")
azureappservice_fitnessappfrontend("`fitness-app-frontend (Azure App Service)`")
end
subgraph "Dependency Resources"
%% Dependency Resources
azure_mysql["`mysql`"]
end
%% Relationships
svcazureappservice_activityservice --> |"hosted on"| azureappservice_activityservice
azureappservice_activityservice -.-> |"depends on"| azure_mysql
svcazureappservice_adminservice --> |"hosted on"| azureappservice_adminservice
svcazureappservice_aiservice --> |"hosted on"| azureappservice_aiservice
svcazureappservice_configserver --> |"hosted on"| azureappservice_configserver
svcazureappservice_eureka --> |"hosted on"| azureappservice_eureka
svcazureappservice_gateway --> |"hosted on"| azureappservice_gateway
svcazureappservice_userservice --> |"hosted on"| azureappservice_userservice
svcazureappservice_fitnessappfrontend --> |"hosted on"| azureappservice_fitnessappfrontend
```

- Each microservice is hosted on Azure App Service.
- All services depend on a shared MySQL database.

## **Recommended Azure Resources**
### Application: FitTrack-Full_stack_fitness_app
- **Hosting Service Type**: Azure App Service
- **SKU**: Standard (S1) - Suitable for production workloads with moderate traffic.
- **Configuration**:
  - **Language**: Java, TypeScript
  - **Environment Variables**: Add database connection strings, Eureka server URLs, and other required configurations.
- **Dependencies**:
  - **Dependency Name**: MySQL Database
  - **SKU**: Basic (B1) - Suitable for development and testing environments.
  - **Service Type**: Azure Database for MySQL
  - **Connection Type**: Connection string
  - **Environment Variables**: Add MySQL connection strings.

## **Recommended Supporting Services**
- **Application Insights**: For monitoring and diagnostics.
- **User-Assigned Managed Identity**: For secure access to Azure resources.
- **Log Analytics Workspace**: Centralized logging for all services.
- **Key Vault (Optional)**: Store sensitive information like database connection strings.

## **Recommended Security Configurations**
- Assign User-Assigned Managed Identity to all App Services.
- Grant Managed Identity access to Key Vault (if used).

## **Execution Steps**
### 1. Create Azure Infrastructure Files for AZD
- Provisioning tool: AZD
- Expected files: `azure.yaml`, `infra/main.bicep`, `infra/main.parameters.json`
- If files exist:
  - Verify that the Azure resources in the files match the plan.
  - Update files if necessary.
- If files do not exist:
  - Generate the missing files.
  - Validate the files for errors and fix them.

### 2. Environment Setup for AZD
- Install AZ CLI and AZD if not already installed.
- Run `azd env new <envName> --no-prompt` to create a new environment.
- Set environment variables using `azd env set <key> <value>`.
- Set the subscription and resource group.

### 3. Deployment
- Run `azd provision --preview --no-prompt` to validate infrastructure.
- Deploy the application using `azd up --no-prompt`.
- Validate deployment by checking application logs.

### 4. Summarize Deployment Result
- Use `appmod-summarize-result` to generate a deployment summary.

## **Progress Tracking**
- Create and update `.azure/progress.copilotmd` after each step.
- Example format:
  - ‚úÖ Completed tasks
  - üî≤ Pending tasks
  - ‚ùå Failed tasks with error notes